#!/usr/bin/env bash

source "{{ .chezmoi.sourceDir }}/source/00_common.sh"

# OSX-only stuff. Abort if not OSX.
is_osx || exit 0

# Install Homebrew.
if [[ ! "$(type -p brew)" ]]; then
  e_header "Installing Homebrew"
  
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  
  eval "$(/opt/homebrew/bin/brew shellenv)"
fi

# Exit if, for some reason, Homebrew is not installed.
[[ ! "$(type -p brew)" ]] && e_error "Homebrew failed to install." && exit 1

e_header "Updating Homebrew"
brew doctor
brew update
